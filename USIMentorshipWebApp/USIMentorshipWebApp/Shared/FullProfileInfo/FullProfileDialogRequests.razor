@inject NavigationManager NavigationManager
@inject UserService userService
@using USIMentorshipWebApp.Data;
@using USIMentorshipWebApp.Shared.RequestMentorship
@using USIMentorshipWebApp.Models
@using System.Linq;

<RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Start" Gap=".5rem" Class="rz-p-2">
    @* PROFILE PICTURE *@
    <RadzenStack Orientation="Orientation.Vertical" Style="width:180px;">
        <RadzenImage Path=@RequestUser.ProfilePicutre Style="width: 180px; height: 180px; border-radius: 50%;" />

        @* MENTORSHIP LENGTH *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-mt-2 rz-my-0">Mentorship Length</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><b>6 months</b></RadzenText>

        @* DESIRED FIELD *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-mt-2 rz-my-0">Desired Industry</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><b>@RequestUser.Industry</b></RadzenText>

    </RadzenStack>
    @* Gap is the size of the gap between the child items of RadzenStack *@
    <RadzenStack Orientation="Orientation.Vertical" Gap="4">
        @* rz-display-flex puts the text in a flexible layout*@
        @* rz-mt-2 applies a margin of value 2 to the top of the text *@
        @* rz-my-0 applies the vertical margin of 0 to the top and bottom margin (removes the margins on top and bottom) *@
        @* NAME *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Mentee Name</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><b>@(RequestUser.FullName)</b></RadzenText>

        @* MAJOR *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-4 rz-mb-0">Major</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><b>@RequestUser.Major</b></RadzenText>

        @* MINOR *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Minor</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><b>@RequestUser.Minor</b></RadzenText>

        @* LOCATION *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Location</RadzenText>
        <RadzenText class="mb-2" TextStyle="TextStyle.Body1"><b>@(displayedCity.CityName + ", " + displayedState.StateName + ", " + displayedCountry.CountryName)</b></RadzenText>

        @* LINKEDIN *@
        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">LinkedIn</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><a href=https://@RequestUser.LinkedInLink>@RequestUser.LinkedInLink</a></RadzenText>
    </RadzenStack>
</RadzenStack>

@* BIO (it spans the width of both rows at the bottom) *@
<RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" Gap="4" class="rz-p-2">
    <RadzenStack Orientation="Orientation.Vertical">
        <RadzenText TextStyle="TextStyle.Overline" class="rz-display-flex rz-mt-2 rz-my-0">Bio</RadzenText>
        <RadzenText TextStyle="TextStyle.Body1"><b>@RequestUser.Bio</b></RadzenText>
    </RadzenStack>
</RadzenStack>

@code {
    //must have this property for the cascading dropdown
    [Parameter]
    [CascadingParameter]
    public int requestUserId { get; set; }

    User RequestUser = new User();
    private UsiMentorshipApplicationContext _context = new UsiMentorshipApplicationContext();
    public List<User> userList;
    public int? matchId;
    State displayedState;
    City displayedCity;
    Country displayedCountry;

    protected override async Task OnInitializedAsync()
    {
        RequestUser = userService.GetUserByIdAsync(requestUserId);
        displayedState = await userService.GetStateByIdAsync(RequestUser.BusinessStateCode);
        displayedCity = await userService.GetCityByIdAsync(RequestUser.BusinessCityId);
        displayedCountry = await userService.GetCountryByIdAsync(RequestUser.BusinessCountryCode);
    }
    
}

